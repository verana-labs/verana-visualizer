# Verana Visualizer

The Visualizer is a containerized frontend that presents network statistics and offers an interactive interface to explore ecosystems and their relationships.

For this first version, as only the verana network API https://api.testnet.verana.network and https://api.testnet.verana.network are available, it is only possible to query limited information.

For this reason, while the indexer and the resolver are being built, in its first version, the visualizer will provide:

- a Header, with the Verana icon, basic network information
- a form section to input a trust registry ID and a search button
- a result section to display the found trust registry, its credential schemas, permissions, etc.

## Specification

### [GENERAL] General

The Verana Visualizer MUST be delivered as a container.

For inspiration, you may have a look at the [verana-frontend](https://github.com/verana-labs/verana-frontend) which is a react + nextjs project and is delivered as a container.
You can check its .github folder for CI/CD scripts.

#### [GENERAL-DEPLOYMENT] General - Deployment

- [GENERAL-DEPLOYMENT-HUB] Container MUST be versioned and deployed to docker hub.
- [GENERAL-DEPLOYMENT-DOCKER] Documentation for running the container with docker MUST be provided.
- [GENERAL-DEPLOYMENT-KUBE] Documentation for deploying the container in Kubernetes MUST be provided.
- [GENERAL-DEPLOYMENT-HELM] the Visualizer MUST be installable in Kubernetes by using helm install. Documentation MUST be provided.
- [GENERAL-DEPLOYMENT-LAMBDA] the Visualizer MUST be runnable in Amazon Lambda. Documentation MUST be provided.

#### [GENERAL-ENV] General - Container Variables

| Type                           |Variable                               | Description                    | Default Value (if unspecified)                    |
|--------------------------------|---------------------------------------|----------------------------------|----------------------------------|
| General                        | APP_NAME                              |                                  | Verana Visualizer                         |
|                                | APP_LOGO                              |                                  | logo.svg                        |
| Network Configuration          | API_ENDPOINT                  |                                  | https://api.testnet.verana.network       |
|                                | RPC_ENDPOINT                  |                                  | https://rpc.testnet.verana.network       |
|                                | IDX_ENDPOINT                  |                                  | https://idx.testnet.verana.network       |
|                                | RESOLVER_ENDPOINT                  |                                  | https://resolver.verana.network       |
|                                | CHAIN_ID                      |                                  | vna-mainnet-1       |
|                                | CHAIN_NAME                          |                                  | Mainnet       |

#### [GENERAL-LAYOUT] General - Layout

[GENERAL-LAYOUT-RESPONSIVE] App MUST be usable from any device, layout MUST be responsive.

[GENERAL-LAYOUT-HEADER] Header MUST include a squared App logo and App name on the left side, and on the right side a dark/light mode. Optionally, if layout is very small, a Menu hamburger icon CAN appear on te left side of the header, and the App name MAY disappear.

[GENERAL-LAYOUT-FAVICON]
TBD

### Header Specific [HEADER]

The header MUST show the following information:

- [HEADER-NETWORK-INFO] CHAIN_NAME and CHAIN_INFO
- [HEADER-TOKEN-METRICS] The following general statistics:
  - Total Supply (VNA)
  - Inflation Rate (%)
  - Trust Deposit size (VNA)
  - Block Height

### Form Section [FORM]

- [FORM-INPUT] The form MUST include an input field where the user enters a trust registry id, with a search button positioned on the right (similar to a standard search engine).

- [FORM-QUERY-EXEC-TR] API_ENDPOINT MUST be used to query the trust registry.

Example on testnet network:

https://api.testnet.verana.network/#/Query/GithubComveranaLabsveranaBlockchainQuery_GetTrustRegistry

`/verana/tr/v1/get/{tr_id}`

```json
{
  "trust_registry": {
    "id": "18",
    "did": "did:fabrice:1234",
    "controller": "verana1vp46072t66qt9rxn6zhl6f6nysytx23tgd4knj",
    "created": "2025-09-09T13:34:25.219130354Z",
    "modified": "2025-09-09T13:50:12.548583172Z",
    "archived": null,
    "deposit": "10000000",
    "aka": "https://docs.verana.io",
    "active_version": 2,
    "language": "en",
    "versions": [
      {
        "id": "25",
        "tr_id": "18",
        "created": "2025-09-09T13:34:25.219130354Z",
        "version": 1,
        "active_since": "2025-09-09T13:34:25.219130354Z",
        "documents": [
          {
            "id": "25",
            "gfv_id": "25",
            "created": "2025-09-09T13:34:25.219130354Z",
            "language": "en",
            "url": "https://psycho.uche.org/index.html",
            "digest_sri": "sha384-LQyJ8XBWKDorXEou1/oc3GQFl74RNccm/F2HDQxpJpDpnbz/o8vya7LW0N4B0eOl"
          }
        ]
      },
      {
        "id": "26",
        "tr_id": "18",
        "created": "2025-09-09T13:39:17.711723724Z",
        "version": 2,
        "active_since": "2025-09-09T13:43:43.600755820Z",
        "documents": [
          {
            "id": "26",
            "gfv_id": "26",
            "created": "2025-09-09T13:39:17.711723724Z",
            "language": "en",
            "url": "https://psycho.uche.org/voz/concierto.mp3",
            "digest_sri": "sha384-h5MRgkJnpQ13OLDYEHgA36g5+35q5x0nul9yE29TOeOZA3+AJNWvXUq5aMJJXJp4"
          }
        ]
      },
      {
        "id": "27",
        "tr_id": "18",
        "created": "2025-09-09T14:20:02.498278640Z",
        "version": 3,
        "active_since": "0001-01-01T00:00:00Z",
        "documents": [
          {
            "id": "27",
            "gfv_id": "27",
            "created": "2025-09-09T14:20:02.498278640Z",
            "language": "en",
            "url": "https://psycho.uche.org/voz/concierto.mp3",
            "digest_sri": "sha384-h5MRgkJnpQ13OLDYEHgA36g5+35q5x0nul9yE29TOeOZA3+AJNWvXUq5aMJJXJp4"
          }
        ]
      }
    ]
  }
}
```

- [FORM-QUERY-EXEC-CS] Then API_ENDPOINT MUST be used to query the existing credential schemas for this trust registry.

```json
{
  "schemas": [
    {
      "id": "20",
      "tr_id": "18",
      "created": "2025-09-10T19:52:20.753223599Z",
      "modified": "2025-09-10T19:52:20.753223599Z",
      "archived": null,
      "deposit": "10000000",
      "json_schema": "{\n  \"$id\": \"vpr:verana:mainnet/cs/v1/js/12345678\",\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"title\": \"ExampleCredential\",\n  \"description\": \"ExampleCredential using JsonSchema\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"credentialSubject\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"id\": {\n          \"type\": \"string\",\n          \"format\": \"uri\"\n        },\n        \"firstName\": {\n          \"type\": \"string\",\n          \"minLength\": 0,\n          \"maxLength\": 256\n        },\n        \"lastName\": {\n          \"type\": \"string\",\n          \"minLength\": 1,\n          \"maxLength\": 256\n        },\n        \"expirationDate\": {\n          \"type\": \"string\",\n          \"format\": \"date\"\n        },\n        \"countryOfResidence\": {\n          \"type\": \"string\",\n          \"minLength\": 2,\n          \"maxLength\": 2\n        }\n      },\n      \"required\": [\n        \"id\",\n        \"lastName\",\n        \"birthDate\",\n        \"expirationDate\",\n        \"countryOfResidence\"\n      ]\n    }\n  }\n}\n\n",
      "issuer_grantor_validation_validity_period": 365,
      "verifier_grantor_validation_validity_period": 365,
      "issuer_validation_validity_period": 365,
      "verifier_validation_validity_period": 365,
      "holder_validation_validity_period": 365,
      "issuer_perm_management_mode": "GRANTOR_VALIDATION",
      "verifier_perm_management_mode": "GRANTOR_VALIDATION"
    }
  ]
}
```

### Result Section [RESULT]

- [RESULT-DISPLAY] if a trust registry has been found, the result section must display the trust registry, its attribute, and its credential schemas.
- [RESULT-FORMAT] json schema MUST be formatted with a json formatter. Attribute names must be converted from snake_case to  Title Case.

Implementor is free to optimize display to make it look nice and effective.

Notes:

- `deposit` is in uvna. It must be converted to VNA.
- `null` attribute MUST not be shown.
- `url`s MUST be clickable (open in a new window).
